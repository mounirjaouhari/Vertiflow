# ============================================================================
# PROJET VERTIFLOW - Agriculture Verticale Intelligente
# ============================================================================
# Date de creation    : 25/12/2025
# Mise a jour         : 04/01/2026
# Equipe              : VertiFlow Core Team
#
# Membres:
#   @Mounir      - Architecte & Scientifique
#   @Imrane      - DevOps & Infrastructure
#   @Mouhammed   - Data Engineer & Analyste ETL
#   @Asama       - Biologiste & Domain Expert
#   @MrZakaria   - Encadrant & Architecte Data
#
# ----------------------------------------------------------------------------
# FICHIER: .env.example
# DESCRIPTION: Template des variables d'environnement
#              Copiez ce fichier vers .env et remplissez les valeurs
#
# Developpe par       : @Imrane, @Mouhammed
# Ticket(s) associe(s): TICKET-004, TICKET-125
# Sprint              : Semaine 1, Semaine 6
#
# ----------------------------------------------------------------------------
# (c) 2025-2026 VertiFlow Core Team
# Initiative Nationale Marocaine JobInTech - YNOV Maroc Campus
# ============================================================================

# =============================================================================
# ENVIRONNEMENT GENERAL
# =============================================================================
ENVIRONMENT=development
# Options: development, staging, production

# Timezone (pour les calculs de photoperiode)
TZ=Africa/Casablanca

# =============================================================================
# INFRASTRUCTURE - BASES DE DONNEES
# =============================================================================

# ClickHouse (OLAP - Telemetrie temps reel)
CLICKHOUSE_HOST=localhost
CLICKHOUSE_PORT=9000
CLICKHOUSE_HTTP_PORT=8123
CLICKHOUSE_USER=default
CLICKHOUSE_PASSWORD=
CLICKHOUSE_DB=vertiflow

# MongoDB (Documents - Configurations, Recettes)
MONGODB_HOST=localhost
MONGODB_PORT=27017
MONGODB_DB=vertiflow
MONGODB_USER=
MONGODB_PASSWORD=

# ============================================================================
# TIMESCALEDB/POSTGRESQL - NON UTILISE
# ============================================================================
# Note: Ces variables sont commentees car le projet utilise ClickHouse
# pour le stockage time-series. Voir docs/ARCHITECTURE_DECISIONS.md
# ============================================================================
# TIMESCALEDB_HOST=localhost
# TIMESCALEDB_PORT=5432
# TIMESCALEDB_USER=postgres
# TIMESCALEDB_PASSWORD=
# TIMESCALEDB_DB=vertiflow_ts

# =============================================================================
# INFRASTRUCTURE - MESSAGING
# =============================================================================

# Kafka (Event Streaming)
KAFKA_BOOTSTRAP_SERVERS=localhost:9092
# Topics standardises (voir docs/ARCHITECTURE_DECISIONS.md)
KAFKA_TOPIC_TELEMETRY_RAW=vertiflow.telemetry.raw
KAFKA_TOPIC_TELEMETRY_ENRICHED=vertiflow.telemetry.enriched
KAFKA_TOPIC_COMMANDS=vertiflow.commands
KAFKA_TOPIC_ALERTS=vertiflow.alerts
KAFKA_TOPIC_DEADLETTER=vertiflow.telemetry.deadletter
KAFKA_CONSUMER_GROUP=vertiflow-consumers
# Legacy topics (migration en cours - voir ARCHITECTURE_DECISIONS.md)
# KAFKA_TOPIC_LEGACY_TELEMETRY=basil_telemetry_full
# KAFKA_TOPIC_LEGACY_DLQ=dead_letter_queue

# MQTT (IoT Sensors)
MQTT_BROKER=localhost
MQTT_PORT=1883
MQTT_TOPIC_PREFIX=vertiflow/sensors
MQTT_USERNAME=
MQTT_PASSWORD=
MQTT_QOS=1

# =============================================================================
# INFRASTRUCTURE - ETL / ORCHESTRATION
# =============================================================================

# Apache NiFi
NIFI_HOST=localhost
NIFI_PORT=8443
NIFI_BASE_URL=https://localhost:8443/nifi-api
NIFI_USERNAME=admin
NIFI_PASSWORD=ctsBtRBKHRAx69EqUghvvgEvjnaLjFEB

# =============================================================================
# SOURCES DE DONNEES EXTERNES - METEO
# =============================================================================

# NASA POWER API (Gratuit, cle demo disponible)
# Documentation: https://power.larc.nasa.gov/docs/
NASA_POWER_API_KEY=DEMO_KEY
NASA_POWER_LAT=33.5731
NASA_POWER_LON=-7.5898
NASA_POWER_DAYS=30

# Open-Meteo (GRATUIT - Pas de cle requise)
# Documentation: https://open-meteo.com/en/docs
# Aucune configuration requise - API publique

# OpenWeather (Free tier: 1000 calls/day)
# Inscription: https://openweathermap.org/api
OPENWEATHER_API_KEY=your_openweather_api_key_here

# =============================================================================
# SOURCES DE DONNEES EXTERNES - ENERGIE
# =============================================================================

# RTE ECO2MIX (France) - OAuth2
# Inscription: https://data.rte-france.com/
# CRITIQUE pour l'optimisation energetique
RTE_CLIENT_ID=your_rte_client_id_here
RTE_CLIENT_SECRET=your_rte_client_secret_here
RTE_DATA_URL=https://digital.iservices.rte-france.com/open_api/eco2mix/v2

# Electricity Maps (Intensite carbone)
# Inscription: https://app.electricitymap.org/
# Free tier: Limite de requetes
ELECTRICITY_MAPS_TOKEN=your_electricity_maps_token_here

# Carbon Interface (Empreinte carbone)
# Inscription: https://www.carboninterface.com/
# Free tier: 200 requests/month
CARBON_INTERFACE_API_KEY=your_carbon_interface_key_here

# =============================================================================
# SOURCES DE DONNEES EXTERNES - MARCHE & ECONOMIE
# =============================================================================

# INSEE API (Indices economiques France)
# Inscription: https://api.insee.fr/
INSEE_API_KEY=your_insee_api_key_here

# =============================================================================
# SOURCES DE DONNEES EXTERNES - QUALITE AIR
# =============================================================================

# OpenAQ (GRATUIT - Cle optionnelle pour rate limits)
# Documentation: https://docs.openaq.org/
OPENAQ_API_KEY=

# =============================================================================
# CONFIGURATION GEOGRAPHIQUE
# =============================================================================

# Coordonnees de la ferme (Casablanca, Maroc par defaut)
FARM_LATITUDE=33.5731
FARM_LONGITUDE=-7.5898
FARM_ALTITUDE_M=50
FARM_TIMEZONE=Africa/Casablanca

# =============================================================================
# MACHINE LEARNING - SYSTEME NERVEUX
# =============================================================================

# Oracle (Predictions de rendement)
ML_MODEL_PATH=./models/oracle_rf.pkl
ML_PREDICTION_INTERVAL=300
ML_CONFIDENCE_THRESHOLD=0.85

# Cortex (Moteur de decision)
CORTEX_CONTROL_INTERVAL=300
CORTEX_SAFETY_MODE=true
CORTEX_MAX_ADJUSTMENT_PCT=10

# Training
ML_TRAINING_DATA_DAYS=30
ML_RETRAINING_SCHEDULE=weekly

# =============================================================================
# ALERTING & MONITORING
# =============================================================================

# Slack Webhooks (Alertes production)
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
SLACK_CHANNEL=#vertiflow-alerts

# Email (SMTP)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
ALERT_EMAIL_TO=team@vertiflow.ma

# Prometheus/Grafana
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000

# =============================================================================
# SECURITE
# =============================================================================

# JWT (API Authentication)
JWT_SECRET_KEY=your-secret-key-change-in-production
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24

# API Rate Limiting
API_RATE_LIMIT_PER_MINUTE=100

# =============================================================================
# LOGGING
# =============================================================================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO
EXTERNAL_LOADER_LOG=INFO

# Log retention
LOG_RETENTION_DAYS=30

# =============================================================================
# NOTES D'INSTALLATION
# =============================================================================
#
# 1. Copiez ce fichier: cp .env.example .env
#
# 2. API Keys CRITIQUES a obtenir:
#    - RTE ECO2MIX: https://data.rte-france.com/ (gratuit, OAuth2)
#    - OpenWeather: https://openweathermap.org/api (gratuit, 1000 calls/day)
#
# 3. API Keys OPTIONNELLES mais recommandees:
#    - Electricity Maps: Pour l'intensite carbone
#    - Carbon Interface: Pour l'empreinte carbone
#
# 4. Sources GRATUITES sans cle:
#    - NASA POWER: Utilise DEMO_KEY par defaut
#    - Open-Meteo: 100% gratuit, pas de cle
#    - OpenAQ: Gratuit, cle optionnelle
#    - OpenFarm: 100% gratuit, pas de cle
#
# 5. Verifiez que tous les services Docker sont lances:
#    docker-compose up -d
#
# 6. Testez les connexions:
#    python scripts/validate_deployment.py
#
# =============================================================================
