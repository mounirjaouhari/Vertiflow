```mermaid
---
title: VertiFlow Data Pipeline - Architecture RÃ©elle NiFi (50 Processeurs)
config:
  theme: base
  themeVariables:
    primaryColor: '#e3f2fd'
    secondaryColor: '#e8f5e9'
    tertiaryColor: '#fff3e0'
---
flowchart TB
    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    %% ZONE 0 : DONNÃ‰ES EXTERNES (9 processeurs)
    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    subgraph Z0["ğŸŒ ZONE 0 - External Data APIs"]
        direction TB
        
        subgraph Z0_WEATHER["â˜€ï¸ Weather Pipeline"]
            Z0_TRIG1["â° Trigger<br/>(GenerateFlowFile)"]
            Z0_WEATHER_API["ğŸŒ¤ï¸ API - Open-Meteo Weather<br/>(InvokeHTTP)"]
            Z0_WEATHER_PUB["ğŸ“¤ Publish - Weather to Kafka<br/>(PublishKafka_2_6)"]
        end
        
        subgraph Z0_AIR["ğŸ’¨ Air Quality Pipeline"]
            Z0_TRIG2["â° Trigger<br/>(GenerateFlowFile)"]
            Z0_AIR_API["ğŸŒ¬ï¸ API - OpenAQ Air Quality<br/>(InvokeHTTP)"]
            Z0_AIR_PUB["ğŸ“¤ Publish - AirQuality to Kafka<br/>(PublishKafka_2_6)"]
        end
        
        subgraph Z0_NASA["ğŸ›°ï¸ NASA Pipeline"]
            Z0_TRIG3["â° Trigger<br/>(GenerateFlowFile)"]
            Z0_NASA_API["ğŸŒ API - NASA POWER<br/>(InvokeHTTP)"]
            Z0_NASA_PUB["ğŸ“¤ Publish - NASA to Kafka<br/>(PublishKafka_2_6)"]
        end
    end

    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    %% SOURCES IoT SIMULÃ‰ES
    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    subgraph SIM["ğŸ”Œ Sources de DonnÃ©es IoT"]
        MQTT_SIM["ğŸŒ¡ï¸ MQTT Simulator<br/>(mqtt_iot_simulator.py)"]
        KAFKA_SIM["ğŸ“Š Kafka Producer<br/>(basil_telemetry_full)"]
        HTTP_CLIENT["ğŸ”— REST Clients<br/>(HTTP POST)"]
    end

    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    %% ZONE 1 : INGESTION & VALIDATION (5 processeurs)
    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    subgraph Z1["ğŸ“¡ ZONE 1 - Ingestion & Validation"]
        direction TB
        Z1_MQTT["ğŸŒ± A2 - ConsumeMQTT<br/>(vertiflow/farm/#)"]
        Z1_HTTP["ğŸ”— A1 - ListenHTTP<br/>(REST API :8081)"]
        Z1_KAFKA["ğŸ“¬ ConsumeKafkaRecord_2_6<br/>(basil_telemetry_full)"]
        Z1_VALIDATE["âœ… ValidateRecord<br/>(Schema Validation)"]
        Z1_MONITOR["ğŸ“Š Monitor_Ingestion_Health<br/>(MonitorActivity)"]
    end

    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    %% ZONE 2 : CONTEXTUALISATION (2 processeurs)
    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    subgraph Z2["ğŸ”„ ZONE 2 - Contextualisation"]
        Z2_VPD["ğŸŒ¡ï¸ B2 - ExecuteScript (VPD)<br/>(Calcul VPD Python)"]
        Z2_KAFKA["ğŸ“¤ B4 - PublishKafka (Telemetry)<br/>(PublishKafka_2_6)"]
    end

    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    %% ZONE 3 : PERSISTANCE (10 processeurs)
    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    subgraph Z3["ğŸ’¾ ZONE 3 - Persistance"]
        direction TB
        
        subgraph Z3_PREP["ğŸ“¦ PrÃ©paration"]
            Z3_MERGE["ğŸ“¦ M1 - MergeContent<br/>(Batching 100 records)"]
            Z3_QUERY["ğŸ” D1 - QueryRecord<br/>(SQL Filtering)"]
            Z3_UPDATE["âœï¸ UpdateRecord<br/>(Field Updates)"]
        end
        
        subgraph Z3_LOCAL["ğŸ  Stockage Local"]
            Z3_CLICK["ğŸ“ˆ C1 - PutClickHouse<br/>(PutDatabaseRecord JDBC)"]
            Z3_MONGO["ğŸ“ C2 - PutMongo (Audit)<br/>(MongoDB)"]
            Z3_FILE["ğŸ“ C3 - PutFile (Archive)<br/>(Local Filesystem)"]
        end
        
        subgraph Z3_CLOUD["â˜ï¸ Google Cloud"]
            Z3_GCS["ğŸ—„ï¸ C4 - PutGCSObject<br/>(Data Lake)"]
            Z3_BQ["ğŸ“Š C5 - PutBigQueryBatch<br/>(Analytics)"]
        end
        
        subgraph Z3_RATE["âš¡ Rate Limiting"]
            Z3_RATE1["ğŸš¦ Rate Limit - b43c2342<br/>(ControlRate)"]
            Z3_RATE2["ğŸš¦ Rate Limit - b43c2140<br/>(ControlRate)"]
            Z3_LOG1["ğŸ“ Log Error - b43c2342<br/>(LogAttribute)"]
            Z3_LOG2["ğŸ“ Log Error - b43c2140<br/>(LogAttribute)"]
        end
    end

    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    %% ZONE 4 : RÃ‰TROACTION (11 processeurs)
    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    subgraph Z4["ğŸ” ZONE 4 - RÃ©troaction & Alertes"]
        direction TB
        
        subgraph Z4_ANALYSIS["ğŸ”¬ Analyse"]
            Z4_ZSCORE["ğŸ“Š Z-Score Validator<br/>(ExecuteScript)"]
            Z4_QUERY1["ğŸ” D1 - QueryRecord<br/>(Anomalies)"]
            Z4_QUERY2["ğŸ” D1 - QueryRecord<br/>(Thresholds)"]
            Z4_JSON["ğŸ“‹ EvaluateJsonPath<br/>(Extract Fields)"]
        end
        
        subgraph Z4_ACTION["âš¡ Actions"]
            Z4_ATTR["ğŸ·ï¸ UpdateAttribute<br/>(Add Metadata)"]
            Z4_ATOJ["ğŸ“„ D2 - AttributesToJSON<br/>(Build Payload)"]
            Z4_KAFKA["ğŸ“¤ B4 - PublishKafka (Corrector)<br/>(Feedback Commands)"]
            Z4_MQTT["ğŸ“¡ D3 - PublishMQTT<br/>(IoT Commands)"]
        end
        
        subgraph Z4_PERSIST["ğŸ’¾ Persistance Feedback"]
            Z4_MERGE["ğŸ“¦ M1 - MergeContent<br/>(Batching)"]
            Z4_GCS["ğŸ—„ï¸ C4 - PutGCSObject<br/>(Feedback Archive)"]
            Z4_MONGO["ğŸ“ C2 - PutMongo<br/>(Feedback Audit)"]
        end
    end

    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    %% ZONE 5 : CHARGEURS STATIQUES (10 processeurs)
    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    subgraph Z5["ğŸ“ ZONE 5 - Static Data Loaders"]
        direction TB
        
        subgraph Z5_DATASETS["ğŸ“Š Datasets CSV"]
            Z5_GET_CSV["ğŸ“„ GetFile - Datasets CSV<br/>(CSV Files)"]
            Z5_CONVERT["ğŸ”„ ConvertRecord - CSV to JSON<br/>(ConvertRecord)"]
            Z5_PUB_DS["ğŸ“¤ Publish - Datasets to Kafka<br/>(PublishKafka_2_6)"]
        end
        
        subgraph Z5_LAB["ğŸ”¬ Lab Data"]
            Z5_GET_LAB["ğŸ§ª GetFile - Lab Data<br/>(Lab Files)"]
            Z5_VALIDATE_LAB["âœ… ValidateRecord - Lab Data<br/>(Schema Check)"]
            Z5_PUB_LAB["ğŸ“¤ Publish - Lab to Kafka<br/>(PublishKafka_2_6)"]
        end
        
        subgraph Z5_RECIPES["ğŸ“‹ Recipes"]
            Z5_GET_REC["ğŸ“‹ GetFile - Recipes<br/>(Recipe Files)"]
            Z5_MONGO_REC["ğŸ“ PutMongo - Plant Recipes<br/>(MongoDB)"]
        end
        
        subgraph Z5_MARKET["ğŸ’° Market Data"]
            Z5_SCRAPED["ğŸŒ ConsumeKafka - Scraped Data<br/>(ConsumeKafka_2_6)"]
            Z5_MONGO_MKT["ğŸ“ PutMongo - Market Prices<br/>(MongoDB)"]
        end
    end

    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    %% DLQ - Dead Letter Queue (1 processeur)
    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    subgraph DLQ["âš ï¸ DLQ - Dead Letter Queue"]
        DLQ_LOG["ğŸ“ DLQ_Logger<br/>(LogMessage)"]
    end

    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    %% STOCKAGE FINAL
    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    subgraph STORAGE["ğŸ—„ï¸ Stockage"]
        CLICKHOUSE[("ğŸ“ˆ ClickHouse<br/>Time-Series Analytics")]
        MONGODB[("ğŸ“ MongoDB<br/>Documents & Audit")]
        GCS[("â˜ï¸ GCS<br/>Data Lake")]
        BIGQUERY[("ğŸ“Š BigQuery<br/>Advanced Analytics")]
        KAFKA[("ğŸ“¬ Kafka<br/>Event Streaming")]
    end

    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    %% VISUALISATION
    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    subgraph VIZ["ğŸ“Š Visualisation"]
        GRAFANA["ğŸ“ˆ Grafana<br/>Real-time Dashboards"]
        LOOKER["ğŸ“Š Looker Studio<br/>Business Analytics"]
    end

    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    %% CONNEXIONS - Zone 0
    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    Z0_TRIG1 --> Z0_WEATHER_API --> Z0_WEATHER_PUB
    Z0_TRIG2 --> Z0_AIR_API --> Z0_AIR_PUB
    Z0_TRIG3 --> Z0_NASA_API --> Z0_NASA_PUB
    
    Z0_WEATHER_PUB --> KAFKA
    Z0_AIR_PUB --> KAFKA
    Z0_NASA_PUB --> KAFKA

    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    %% CONNEXIONS - Sources â†’ Zone 1
    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    MQTT_SIM ==>|"MQTT QoS1"| Z1_MQTT
    KAFKA_SIM ==>|"Kafka Stream"| Z1_KAFKA
    HTTP_CLIENT ==>|"REST POST"| Z1_HTTP
    KAFKA ==>|"External Data"| Z1_KAFKA

    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    %% CONNEXIONS - Zone 1 interne
    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    Z1_MQTT --> Z1_VALIDATE
    Z1_HTTP --> Z1_VALIDATE
    Z1_KAFKA --> Z1_VALIDATE
    Z1_VALIDATE -->|"âœ… Valid"| Z1_MONITOR
    Z1_VALIDATE -.->|"âŒ Invalid"| DLQ_LOG
    Z1_MONITOR --> Z2_VPD

    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    %% CONNEXIONS - Zone 2
    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    Z2_VPD -->|"Enriched Data"| Z2_KAFKA
    Z2_KAFKA --> KAFKA

    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    %% CONNEXIONS - Zone 2 â†’ Zone 3
    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    Z2_KAFKA --> Z3_MERGE
    Z2_KAFKA --> Z3_QUERY
    
    Z3_MERGE --> Z3_GCS
    Z3_MERGE --> Z3_BQ
    
    Z3_QUERY --> Z3_UPDATE
    Z3_UPDATE --> Z3_CLICK
    Z3_UPDATE --> Z3_MONGO
    Z3_UPDATE --> Z3_FILE
    
    Z3_RATE1 --> Z3_CLICK
    Z3_RATE2 --> Z3_MONGO
    Z3_RATE1 -.->|"Error"| Z3_LOG1
    Z3_RATE2 -.->|"Error"| Z3_LOG2

    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    %% CONNEXIONS - Zone 3 â†’ Stockage
    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    Z3_CLICK --> CLICKHOUSE
    Z3_MONGO --> MONGODB
    Z3_GCS --> GCS
    Z3_BQ --> BIGQUERY

    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    %% CONNEXIONS - Zone 4 (Feedback Loop)
    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    CLICKHOUSE -->|"Anomalies"| Z4_ZSCORE
    Z4_ZSCORE --> Z4_QUERY1
    Z4_QUERY1 --> Z4_QUERY2
    Z4_QUERY2 --> Z4_JSON
    Z4_JSON --> Z4_ATTR
    Z4_ATTR --> Z4_ATOJ
    Z4_ATOJ --> Z4_KAFKA
    Z4_ATOJ --> Z4_MQTT
    
    Z4_KAFKA --> KAFKA
    Z4_MQTT -.->|"ğŸ”„ Control Commands"| MQTT_SIM
    
    Z4_MERGE --> Z4_GCS
    Z4_MERGE --> Z4_MONGO
    Z4_GCS --> GCS
    Z4_MONGO --> MONGODB

    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    %% CONNEXIONS - Zone 5
    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    Z5_GET_CSV --> Z5_CONVERT --> Z5_PUB_DS --> KAFKA
    Z5_GET_LAB --> Z5_VALIDATE_LAB --> Z5_PUB_LAB --> KAFKA
    Z5_GET_REC --> Z5_MONGO_REC --> MONGODB
    Z5_SCRAPED --> Z5_MONGO_MKT --> MONGODB

    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    %% CONNEXIONS - Visualisation
    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    CLICKHOUSE --> GRAFANA
    BIGQUERY --> LOOKER

    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    %% STYLES
    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    style Z0 fill:#e8eaf6,stroke:#3f51b5,stroke-width:3px
    style Z1 fill:#e3f2fd,stroke:#1565c0,stroke-width:3px
    style Z2 fill:#e8f5e9,stroke:#2e7d32,stroke-width:3px
    style Z3 fill:#fff3e0,stroke:#ef6c00,stroke-width:3px
    style Z4 fill:#fce4ec,stroke:#c2185b,stroke-width:3px
    style Z5 fill:#f3e5f5,stroke:#7b1fa2,stroke-width:3px
    style DLQ fill:#ffebee,stroke:#c62828,stroke-width:3px
    style SIM fill:#e0f7fa,stroke:#00838f,stroke-width:2px
    style STORAGE fill:#eceff1,stroke:#546e7a,stroke-width:2px
    style VIZ fill:#fff9c4,stroke:#f9a825,stroke-width:2px
    
    style Z0_WEATHER fill:#bbdefb,stroke:#1976d2
    style Z0_AIR fill:#c8e6c9,stroke:#388e3c
    style Z0_NASA fill:#ffe0b2,stroke:#f57c00
    
    style Z3_LOCAL fill:#bbdefb,stroke:#1976d2
    style Z3_CLOUD fill:#c8e6c9,stroke:#388e3c
    style Z3_PREP fill:#fff9c4,stroke:#fbc02d
    style Z3_RATE fill:#ffccbc,stroke:#e64a19
    
    style Z4_ANALYSIS fill:#e1bee7,stroke:#8e24aa
    style Z4_ACTION fill:#b2dfdb,stroke:#00897b
    style Z4_PERSIST fill:#ffe0b2,stroke:#f57c00
    
    style Z5_DATASETS fill:#b3e5fc,stroke:#0288d1
    style Z5_LAB fill:#dcedc8,stroke:#689f38
    style Z5_RECIPES fill:#ffe0b2,stroke:#f57c00
    style Z5_MARKET fill:#f8bbd9,stroke:#c2185b

    classDef storage fill:#e0e0e0,stroke:#616161,stroke-width:2px
    classDef kafka fill:#ffcc80,stroke:#ef6c00,stroke-width:2px
    
    class CLICKHOUSE,MONGODB,GCS,BIGQUERY storage
    class KAFKA kafka
```
