apiVersion: 1


# Auto-deletes datasources that are not in the file
deleteDataSourcesFromUI: false

datasources:
  - name: ClickHouse
    type: grafana-clickhouse-datasource
    access: proxy
    url: http://clickhouse:8123
    uid: aeb1b4ee-1f88-42c3-a35a-f594cac90e00
    isDefault: true
    editable: true
    jsonData:
      host: clickhouse
      port: 9000
      user: default
      defaultDatabase: vertiflow
    secureJsonData:
      password: default

  - name: Prometheus
    type: prometheus
    access: proxy
    url: http://prometheus:9090
    uid: eac5c342-46aa-46b8-934f-8e09892a5192
    isDefault: false

  - name: Alerts API (Infinity)
    type: yesoreyeram-infinity-datasource
    uid: infinity-alerts-uid
    access: proxy
    url: http://mongo-api:5000
    isDefault: false
    jsonData:
      authentication:
        type: none
    secureJsonData: {}
    editable: true

  # Infinity Datasource pour MongoDB (GRATUIT - recommand√©)
  - name: MongoDB via API
    type: yesoreyeram-infinity-datasource
    uid: mongodb-infinity-uid
    access: proxy
    url: http://mongo-api:5000
    isDefault: false
    jsonData:
      authentication:
        type: none
    secureJsonData: {}
    editable: true

  # MongoDB Datasources pour les dashboards d'alertes IoT
  - name: MongoDB (Incidents)
    type: grafana-mongodb-datasource
    uid: mongodb-incidents-uid
    access: proxy
    isDefault: false
    editable: true
    jsonData:
      url: mongodb://mongodb:27017
      defaultDatabase: vertiflow_ops

  - name: MongoDB (Alerts)
    type: grafana-mongodb-datasource
    uid: mongodb-datasource-uid
    access: proxy
    isDefault: false
    editable: true
    jsonData:
      url: mongodb://mongodb:27017
      defaultDatabase: vertiflow_ops


